<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Test Fully QR</title>
</head>
<body>
  <button onclick="scanQRCode()">Skanuj QR</button>
  <div id="result"></div>

  <script>
    // Bind handlers for scan success and cancel
    fully.bind('onQrScanSuccess', 'onScanned("$code");');
    fully.bind('onQrScanCancelled', 'onCancelled();');

    function scanQRCode() {
        // Prompt, resultUrl, cameraId, timeout, beep, cancel button, flashlight
        fully.scanQrCode("Zeskanuj kod", "", -1, 15, true, true, false);
    }

    function onScanned(code) {
        document.getElementById("result").innerText = "Zeskanowano: " + code;

        // Automatically open the scanned URL
        if (code && code.startsWith("http")) {
            window.location.href = code;
        } else {
            alert("Nieprawid≈Çowy link: " + code);
        }
    }

    function onCancelled() {
        alert("Skanowanie anulowane");
    }
  </script>
</body>
</html>
